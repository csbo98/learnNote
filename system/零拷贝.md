# 零拷贝

zero-copy是一种数据传输操作，在这种操作中，CPU不执行从一个内存区域到另一个内存区域的数据拷贝操作；或者禁止不必要的数据拷贝操作。零拷贝可以节约CPU周期和内存带宽。

使用零拷贝可以让IO速度更快，吞吐甚至可以变为原来的三倍；同时可以把CPU空闲出来去给其他的应用程序使用。具体的作用可以参考维基百科

零拷贝操作一般有三种实现的方式：

1. 减少甚至避免用户空间和内核空间之间的数据拷贝
2. 绕过内核直接IO，也即允许用户态进程绕过内核直接和硬件进行数据传输，内核在传输过程中只负责一些管理和辅助的工作
3. 优化内核缓冲区和用户缓冲区之间的传输

## 参考博客

[利用零拷贝提高数据传输效率](http://bohr.me/zero-copy/)
[zero copy I:User-Mode Perspective](http://www.linuxjournal.com/article/6345?page=0,0). 讲解了一个典型的例子——用read读取一个文件再用write通过网络发送出去——中的拷贝流程，进而引入零拷贝。这篇文章中讲解的第一个减少拷贝次数的方法是使用mmap系统调用,算是绕过内核直接IO。另外一种方法是使用sendfile系统调用,要想使用sendfile系统调用，NIC需要有memory gather的功能，而且还要能够具备小效验和计算的能力(把一部分网路协议栈相关的功能卸载到NIC上，能够减轻CPU的负担，而且可以支持一些新的方便传输数据的操作)。
